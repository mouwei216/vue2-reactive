<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  </head>
  <body>
    <div>
      <input id="firstname" type="text" />
      <button onclick="changeFirstname()">修改firstname</button>
      <br />
      <input id="lastname" type="text" />
      <button onclick="changeLastname()">修改lastname</button>
      <br />
      <input id="age" type="text" />
      <button onclick="changeAge()">修改age</button>
      <br />
      <input id="province" type="text" />
      <button onclick="changeProvince()">修改addr.province</button>
      <br />
      <input id="city" type="text" />
      <button onclick="changeCity()">修改addr.city</button>
    </div>
    <script src="./dist/vue.js"></script>
    <script>
      const firstnameInput = document.querySelector('#firstname');
      const lastnameInput = document.querySelector('#lastname');
      const ageInput = document.querySelector('#age');
      const provinceInput = document.querySelector('#province');
      const cityInput = document.querySelector('#city');

      function changeFirstname() {
        vm.firstname = firstnameInput.value;
      }

      function changeLastname() {
        vm.lastname = lastnameInput.value;
      }

      function changeAge() {
        vm.age = ageInput.value;
      }

      function changeProvince() {
        vm.addr.province = provinceInput.value;
      }

      function changeCity() {
        vm.addr.city = cityInput.value;
      }

      function render() {
        console.log('\r\n');
        console.log(`开始渲染页面。。。。。。。。。。`);
        console.log(`fullname: ${this.fullname}`);
        console.log(`页面渲染完成。。。。。。。。。。`);
      }

      const vm = new Vue({
        render,
        data: {
          firstname: 'HXK',
          lastname: 'dksafl',
          age: 20,
          addr: {
            province: 'GD',
            city: 'SZ',
          },
        },
        computed: {
          fullname() {
            return `${this.firstname} ${this.lastname}`;
          },
        },
        watch: {
          addr: {
            handler(value, oldValue) {
              console.log(`addr发生变化了：${JSON.stringify(this.addr)}`);
            },
            deep: true,
          },
        },
      });

      console.log(vm);
    </script>
  </body>
</html>
